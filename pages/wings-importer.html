<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Wings Lab • Avalon</title>

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.164.1/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.164.1/examples/jsm/",
      "@pixiv/three-vrm": "https://unpkg.com/@pixiv/three-vrm@2.0.3/lib/three-vrm.module.js"
    }
  }
  </script>

  <style>
    body{margin:0;background:#0b0b0b;color:#eee;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
    header{padding:14px 16px;border-bottom:1px solid #222}
    main{display:grid;grid-template-columns:340px 1fr;gap:16px;padding:16px}
    .panel{border:1px solid #222;border-radius:10px;padding:12px;background:#121212}
    label{display:block;margin:8px 0 4px}
    input[type=file]{width:100%}
    canvas{display:block;width:100%;height:100%}
    #viewport{min-height:520px;border-radius:10px;overflow:hidden;border:1px solid #222;background:#111}
    small{color:#aaa}
  </style>
</head>
<body>
  <header>
    <a href="/" style="color:#cde3ff;text-decoration:none">← Home</a>
  </header>
  <main>
    <div class="panel">
      <h2 style="margin-top:4px">Wings Lab</h2>
      <p>Preview a VRM with wings. This is a client‑side viewer for quick checks.</p>

      <label>VRM (wingless)</label>
      <input id="vrmFile" type="file" accept=".vrm,.glb,.gltf"/>

      <label style="margin-top:10px">Wings (glb/gltf/fbx)</label>
      <input id="wingsFile" type="file" accept=".glb,.gltf,.fbx"/>

      <label style="margin-top:10px">Attach to bone</label>
      <select id="bone">
        <option value="Chest">Chest</option>
        <option value="Spine">Spine</option>
        <option value="UpperChest">UpperChest</option>
      </select>

      <p><small>Note: exporting a VRM with wings requires a full VRM exporter; this viewer is for alignment and screenshots.</small></p>
    </div>

    <div id="viewport"></div>
  </main>

  <script type="module" src="/pages/wings-importer.js"></script>
</body>
</html>
